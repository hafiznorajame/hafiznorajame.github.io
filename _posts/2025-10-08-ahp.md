---
layout: post
title: "How I use Analytical Hierarchy Process (AHP) to select my MSc dissertation project"
date: 2025-10-08
categories: maths
permalink: /blog/ahp.html
use_math: true
output:
  md_document:
    variant: markdown_github
    preserve_yaml: true
---

AHP is an operations research (OR) tool mainly used in decision making.
The AHP helps decision makers to find an optimal decision that suits
their goal and problems. For those who were wondering, OR is a field of
applied mathematics that apply analytical methods for decision making.

The first time I encountered AHP was in early 2024. At that time, I was
a final year BSc Maths student in UBD and I took a module called
“Advanced Operations Research”.

In this post, I aim to show how I use AHP to select my MSc Statistics dissertation topic. This post will not include the theory of AHP here, so there will be no mathematical theory here!. If you are interested in learning about AHP, you can find more detail about it [here](https://www.researchgate.net/profile/Seyyed-Hossein-Jafari-Petroudi/post/how_do_we_compute_consistency_ratio/attachment/5a345dceb53d2f0bba44affb/AS%3A571976892809216%401513381326103/download/AHP-page13.pdf) (the method is quite simple to understand!). Additional resource include the textbook Operations Research: Applications and Algorithms by Wayne L. Winston. This is my main textbook while studying OR!

## 1) How I used AHP for decision making


### MSc Statistics disseration topic

For my MSc dissertation, there are about 42 projects offered to MSc
Statistics students. My main goal for the dissertation is to enhance my
statistical theory knowledge and also learn about its application. So, I
was thinking of choosing a project that consists of 80% theory and 20%
application.

My thought process of choosing my potential project is to remove any
projects that are mostly applied. Additionally, I removed any projects
that are related with time series analysis. While I did well in my time
series module and understand the statistical model and theory, I was not
really interested in exploring it further, and the project offered here
is related to finance, which is not interesting to me. Here are the list
of projects that I was interested in:

| ID  | Title                                               | Research area          |
|---------------|----------------------------------------|------------------|
| P1  | Assessing predictive performance of survival models | Survival Analysis      |
| P2  | Fitting Markov models                               | Stochastic Processes   |
| P3  | Estimation of sparse covariance matrix              | Multivariate Analysis  |
| P4  | Joint Modelling of Longitudinal and Survival Data   | Statistics in Medicine |
| P5  | The origins of epidemics                            | Epidemiology           |
| P6  | Analysis of routine cancer data                     | Statistics in Medicine |

## Criteria

These are the criteria I considered in the AHP:

1.  Theoretical: Does the project involves many statistical theory and
    mathematical derivations?

2.  Knowledge: How much do I know about the area of the project?

3.  Research area: How interested I am with the project in terms of area
    of research?

4.  Coding: How advanced the R coding skills required to take this
    project?

Personally, I would prioritise the research area and the amount of theory in the project. I don't really mind if I have enough knowledge on the particular research area. It would also be great if the level of coding is advanced, but I still prioritise the research area. 

To compare between two different alternatives, we can use the following scale that ranges from equally preferred to extremely preferred, shown as follows:

1. Equally Preferred
2. Equally to Moderately Preferred
3. Moderately Preferred
4. Moderately to Strongly Preferred
5. Strongly Preferred
6. Strongly to Very Strongly Preferred
7. Very Strongly Preferred
8. Very Strongly to Extremely Strongly Preferred
9. Extremely Strongly Preferred

Using the scale above, I can now construct my pairwise comparison matrix for criteria:

Table 1: Pairwise Comparison Matrix for criteria

|          |  Theoretical |  Knowledge | Research Area | Coding |
|:---------|----------:|----------:|---------:| --------: |
| Theoretical | 1 | 3 | 1/4 | 2 |
| Knowledge | 1/3 | 1 | 1/7 | 2 |
| Research Area | 4 | 7 | 1 | 8 |
| Coding | 1/2 | 1/2 | 1/8 | 1 |

Some interpretations of the table above:
-   For Theoretical, I moderately preferred (number 3) this to Knowledge
    and equally to moderately preferred (number 2) this to Coding.
-   I equally to moderately preferred (number 2) Knowledge to Coding.
-   Research area is the most important criterion, where I moderately to
    strongly preferred (number 4) this to Theoretical, very strongly
    preferred (number 7) this to Knowledge, and very strongly to
    extremely strongly preferred (number 8) this to Coding.



After constructing the comparison matrix, I need to check whether comparison matrix is consistent or not. That is, by calculating the consistency ratio (CR) as follows: 

```r
RI = c(0, 0, 0.58, 0.90, 1.12, 1.24, 1.32) # Ratio index

crit_type = c("Theoretical", "Knowledge", "Research Area", "Coding")
crit = matrix(c(1, 3, 1/4, 2,
                1/3, 1, 1/7, 2,
                4, 7, 1, 8,
                1/2, 1/2, 1/8, 1),
              nrow = 4, ncol = 4, 
              byrow = T, dimnames = list(crit_type, crit_type))
CI_crit = (eigen(A)$values[1]-ncol(crit))/(ncol(crit)-1)
CR_crit = CI_crit/RI[ncol(crit)]
```

```r
> CR_crit
[1] 0.0426974+0i
```
In general, a CR value less than 0.10 indicates that the matrix is consistent. If the CR value is more than 0.10, then I would need to consider evaluating my pairwise comparison matrix.

## Pairwise comparison matrix for each criterion

### Criterion 1: Theoretical

Table 2: Pairwise Comparison Matrix for Theoretical

| Project | P1 | P2 | P3 | P4 | P5 | P6 |
|----------|----|----|----|----|----|----|
| **P1** | 1 | 1/6 | 1/3 | 1/4 | 1/4 | 2 |
| **P2** | 6 | 1 | 2 | 4 | 5 | 9 |
| **P3** | 3 | 1/2 | 1 | 2 | 1/3 | 7 |
| **P4** | 4 | 1/4 | 1/2 | 1 | 1/2 | 4 |
| **P5** | 4 | 1/5 | 3 | 2 | 1 | 5 |
| **P6** | 1/2 | 1/9 | 1/7 | 1/4 | 1/5 | 1 |

```r
proj = c("P1", "P2", "P3", "P4", "P5", "P6")
thr = matrix(c(1, 1/6, 1/3, 1/4, 1/4, 2,
               6, 1, 2, 4, 5, 9,
               3, 1/2, 1, 2, 1/3, 7,
               4, 1/4, 1/2, 1, 1/2, 4,
               4, 1/5, 3, 2, 1, 5,
               1/2, 1/9, 1/7, 1/4, 1/5, 1),
            nrow = 6, ncol = 6, 
            byrow = T, dimnames = list(proj, proj))
CI_thr = (eigen(thr)$values[1]-ncol(thr))/(ncol(thr)-1)
CR_thr = CI_thr/RI[ncol(thr)]
```


### Criterion 2: Knowledge

Table 3: Pairwise Comparison Matrix for Knowledge

| Project | P1 | P2 | P3 | P4 | P5 | P6 |
|----------|----|----|----|----|----|----|
| **P1** | 1 | 4 | 4 | 5 | 3 | 1/2 |
| **P2** | 1/4 | 1 | 1/2 | 2 | 3 | 1/3 |
| **P3** | 1/4 | 2 | 1 | 3 | 4 | 1/4 |
| **P4** | 1/5 | 1/2 | 1/3 | 1 | 2 | 1/2 |
| **P5** | 1/3 | 1/3 | 1/4 | 1/2 | 1 | 1/4 |
| **P6** | 2 | 3 | 4 | 2 | 4 | 1 |

```r
knw = matrix(c(1, 4, 4, 5, 3, 1/2,
               1/4, 1, 1/2, 2, 3, 1/3,
               1/4, 2, 1, 3, 4, 1/4,
               1/5, 1/2, 1/3, 1, 2, 1/2,
               1/3, 1/3, 1/4, 1/2, 1, 1/4,
               2, 3, 4, 2, 4, 1),
             nrow = 6, ncol = 6, 
             byrow = T, dimnames = list(proj, proj))
CI_knw = (eigen(knw)$values[1]-ncol(knw))/(ncol(knw)-1)
CR_knw = CI_knw/RI[ncol(knw)]
```


### Criterion 3: Research Area

Table 4: Pairwise Comparison Matrix for Research Area

| Project | P1 | P2 | P3 | P4 | P5 | P6 |
|----------|----|----|----|----|----|----|
| **P1** | 1 | 4 | 2 | 1/2 | 3 | 4 |
| **P2** | 1/4 | 1 | 1 | 1/5 | 2 | 1/3 |
| **P3** | 1/2 | 1 | 1 | 1/2 | 2 | 1/2 |
| **P4** | 2 | 5 | 2 | 1 | 5 | 2 |
| **P5** | 1/3 | 1/2 | 1/2 | 1/5 | 1 | 1/3 |
| **P6** | 1/4 | 3 | 2 | 1/2 | 3 | 1 |

```r
rsc = matrix(c(1, 4, 2, 1/2, 3, 4,
               1/4, 1, 1, 1/5, 2, 1/3,
               1/2, 1, 1, 1/2, 2, 1/2,
               2, 5, 2, 1, 5, 2,
               1/3, 1/2, 1/2, 1/5, 1, 1/3,
               1/4, 3, 2, 1/2, 3, 1),
           nrow = 6, ncol = 6, 
           byrow = T, dimnames = list(proj, proj))
CI_rsc = (eigen(rsc)$values[1]-ncol(rsc))/(ncol(rsc)-1)
CR_rsc = CI_rsc/RI[ncol(rsc)]
```

### Criterion 4: Coding

Table 5: Pairwise Comparison Matrix for Coding

| Project | P1 | P2 | P3 | P4 | P5 | P6 |
|----------|----|----|----|----|----|----|
| **P1** | 1 | 1/4 | 2 | 1/3 | 1/2 | 4 |
| **P2** | 4 | 1 | 3 | 3 | 3 | 4 |
| **P3** | 1/2 | 1/3 | 1 | 1/2 | 2 | 3 |
| **P4** | 3 | 1/3 | 2 | 1 | 4 | 6 |
| **P5** | 2 | 1/3 | 1/2 | 1/4 | 1 | 4 |
| **P6** | 1/4 | 1/4 | 1/3 | 1/6 | 1/4 | 1 |

```r
coding = matrix(c(1, 1/4, 2, 1/3, 1/2, 4,
                  4, 1, 3, 3, 3, 4,
                  1/2, 1/3, 1, 1/2, 2, 3,
                  3, 1/3, 2, 1, 4, 6,
                  2, 1/3, 1/2, 1/4, 1, 4,
                  1/4, 1/4, 1/3, 1/6, 1/4, 1),
                nrow = 6, ncol = 6,
                byrow = T, dimnames = list(proj, proj))
CI_coding = (eigen(coding)$values[1]-ncol(coding))/(ncol(coding)-1)
CR_coding = CI_coding/RI[ncol(coding)]
```

All of the pairwise comparisons matrix for each criterion is consistent.

```r
> CR_thr
[1] 0.07288381+0i
> CR_knw
[1] 0.09399024+0i
> CR_rsc
[1] 0.05561777+0i
> CR_coding
[1] 0.09450809+0i
```
Now, I can proceed to AHP.

## Decision making

In `R`, we can use the function `AHP()` from the package `MCDA` to perform AHP:

```r
library(MCDA)
alt = list(thr = thr,
           knw = knw,
           rsc = rsc,
           coding = coding)
AHP(crit, alt)
```

The output of the code above:

```r
> AHP(crit, alt)
       P1        P2        P3        P4        P5        P6 
0.2241615 0.1679770 0.1209295 0.2563055 0.0891035 0.1415229 
```

Based on the output above, **P4** (Joint model) has the highest weighted value ($w_{p4}=0.256$), followed by **P1**  and **P2**. **P5** has the lowest weighted value. So the following is my ranking of selected projects after performing AHP:

| Rank | ID  | Title                                               | Weighted value          |
|---------------|----------------------------------------|------------------|
| 1 |P4  | Joint Modelling of Longitudinal and Survival Data   | 0.256 |
| 2 |P1  | Assessing predictive performance of survival models | 0.224      |
| 3 |P2  | Fitting Markov models                               | 0.168   |
| 4 | P6  | Analysis of routine cancer data                     | 0.142 |
| 5 | P3  | Estimation of sparse covariance matrix              | 0.121  |
| 6 | P5  | The origins of epidemics                            | 0.089   |

P4 (Joint model) eventually became my dissertation and I think I made the right decisions of choosing this. A bit of summary of what I learn in my dissertation:

- Bayesian statistics, including deriving the conditional distributions for each parameter. (Note that the joint model is a very complex model, so deriving the distributions are mathematically challenging). You might wonder why I need to understand the maths. The main reason is I will need to code these mathematics for estimating the model parameter. Additionally, I also used Markov Chain Monte Carlo.
- Changing the normality assumption into t-distributed error and learning what prior is typically used in a t-model.
- *More on coding side*, I learned how to code in `C++` via the package `Rcpp` (I am still not proficient in it).
- Know a thing or two about Alzheimer's Disease


## 2) Limitations of AHP